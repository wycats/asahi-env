# READ-ONLY: Use 'exo' CLI to modify this file.
# Implementation Plan

[phase]
id = "phase-1"
title = "Phase 1: Baseline + Bringup Automation"
rfcs = []

[plan]

[[plan.changes]]
name = "PCSC bridge verification + docs"
type = "feat"
details = "Confirm the PC/SC vsock bridge works end-to-end (host pcscd ↔ guest pcsclite clients), document the flags and expected environment variables, and ensure failures are evidence-backed."
files = []
tests = []
satisfies = ["First Step::pcsc-bridge"]
no_test_reason = "Primarily integration verification + documentation; add tests later once we factor pure components."

[[plan.changes.tasks]]
id = "bazzite-setup"
title = "Add bazzite-setup (keyd + themes + GNOME defaults)"
status = "completed"

[[plan.changes]]
name = "Evidence retention + git hygiene"
type = "chore"
details = "Decide what belongs in git vs local-only artifacts; update .gitignore and/or documentation accordingly; ensure docs/agent-context/research outputs are ignored by default, and keep only curated summaries in-tree."
files = []
tests = []
satisfies = ["First Step::wrapup::evidence-retention", "First Step::wrapup::gitignore"]
no_test_reason = "Chore/docs changes."

[[plan.changes]]
name = "Clean working tree + remove stragglers"
type = "chore"
details = "Remove accidental/unnecessary files from the repo root (logs, scratch manifests, debug outputs). Ensure any remaining non-code artifacts are either intentionally tracked docs or properly ignored."
files = []
tests = []
satisfies = ["First Step::wrapup::cleanup-working-tree"]
no_test_reason = "Chore cleanup."

[[plan.changes]]
name = "Cargo-ify muvm workflows"
type = "refactor"
details = "Replace remaining ad-hoc scripts with Cargo binaries/subcommands where appropriate (runner/orchestrator/probes). Keep shell scripts only as thin wrappers that call cargo."
files = []
tests = []
satisfies = ["First Step::muvm::cargoify-tools", "First Step::muvm::remove-legacy-scripts"]
no_test_reason = "Mostly CLI wiring/refactors; rely on existing crate tests + manual smoke."

[[plan.changes]]
name = "Polish appimage-runner UX"
type = "feat"
details = "Make the runner boring to use: stable defaults, documented profiles, deterministic output dirs, and no tribal-knowledge env required for known apps like Krita."
files = []
tests = []
satisfies = ["First Step::muvm::runner-polish"]
no_test_reason = "CLI/UX changes; add tests opportunistically where extraction/entrypoint logic is pure."

[[plan.changes]]
name = "Overlay invariants + evidence artifacts"
type = "feat"
details = "Codify RFC 0003 invariants (ABI boundary protection, wrong-arch detection, forbidden paths) in overlay tooling; emit machine-readable manifests/evidence outputs."
files = []
tests = []
satisfies = ["First Step::muvm::overlay-invariants"]
no_test_reason = "Needs design for test harness over images; will add targeted tests once implementation location is fixed."

[[plan.changes]]
name = "Document muvm status + next steps"
type = "docs"
details = "Write a single place that answers: what works today, how to run it, what is experimental, and what’s next, aligned with the workstation mission."
files = []
tests = []
satisfies = ["First Step::docs::muvm-status", "First Step::docs::quickstart", "First Step::roadmap::back-to-mission"]
no_test_reason = "Docs-only."

[[plan.changes]]
name = "Make exo verify green"
type = "fix"
details = "Ensure formatting/lints/coverage gates pass in a clean tree; fix any new failures introduced by wrap-up."
files = []
tests = []
satisfies = ["First Step::verify::green"]
no_test_reason = "Verification is itself the gate."

[[plan.changes]]
name = "Remove deprecated context projections"
type = "chore"
details = "Remove deprecated projection files (task-list.toml, walkthrough.toml) if exo indicates; ensure canonical state lives in implementation-plan.toml."
files = []
tests = []
satisfies = ["First Step::context::projection-cleanup"]
no_test_reason = "Docs-only cleanup."

[[plan.changes]]
name = "Bazzite setup automation (keyd + themes + GNOME defaults)"
type = "feat"
details = "Add a Bazzite-focused setup CLI with split targets (keyd/themes/gnome-defaults) plus apply/check --all; uses rpm-ostree for host package layering, installs Bibata cursor user-locally, and applies runbook-backed GNOME gsettings best-effort."
files = ["Cargo.toml", "Cargo.lock", ".vscode/tasks.json", "docs/manual/README.md", "docs/manual/bazzite-setup.md", "tools/bazzite-setup/Cargo.toml", "tools/bazzite-setup/src/main.rs", "tools/bazzite-setup/src/ops/keyd.rs", "tools/bazzite-setup/src/ops/themes.rs", "tools/bazzite-setup/src/ops/gnome_defaults.rs", "tools/bazzite-setup/src/ops/util.rs", "tools/bazzite-setup/src/ops/mod.rs"]
tests = []
no_test_reason = "Host-dependent integration; validated via exo verify + cargo fmt."
status = "completed"
feedback = [{ author = "Copilot", message = "Implemented and documented bazzite-setup; committed and pushed to main as be58dec. Includes split targets + apply/check --all; host rpm-ostree layering + GNOME gsettings best-effort." }]

[[plan.changes.tasks]]
id = "bazzite-setup"
title = "Implement bazzite-setup (keyd + themes + GNOME defaults)"
status = "completed"

[[plan.changes.tasks.verification]]
kind = "test"
command = "exo verify"
result = "pass"
when = "2025-12-24T21:01:49.071732706+00:00"
details = "Verified after implementation; code landed as commit be58dec on main."

[verification]
automated = ["Run scripts/verify-phase.sh"]
manual = []
